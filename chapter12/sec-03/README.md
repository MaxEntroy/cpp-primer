## 12.3. Using the Library: A Text-Query Program

### 实践

- demo-01

这一版是我自己的实践，我简单说下实践过程的一些问题
1. 总体来说，基本践行了想清楚，再做的步骤，后面没有发生大规模结构问题，整体的开发过程非常快。
2. 对于单测，严格一点也没有什么问题，不过这里由于写的不熟，所以花了点时间

- demo-02

这一版通过Pimpl idiom手法进行重构

1. Pimpl idiom手法进行重构的主要优点是compilation firewall
2. 对于单元测试，可以通过增加成员的get接口来避免我在demo-02当中的实现，我承认我实现的不好，但是private method是没有了

我自己的实现，整体来说，我认为思路还是比较清晰的，对于问题的分析还算透彻，接口语义也比较清新.不足的地方在于，单元测试消耗了我很多时间，
并且我也不确定这是否是正确的实践。

- demo-03

这一版是答案的做法，不过我没写，因为我觉得它的实现是在不怎么样，我觉得是为了说问题而用的一种方法，当然，如果确实如我所想，那么我觉得也无可厚非。

1. 答案在对TextQuery and QueryResult的关系上和我的处理不同，我采用了组合，答案使用了依赖。
2. 由于答案依赖的做法，根本原因在于数据的共享，QueryResult需要借助文章内容，进行正排检索，但是它又没有单独保存的意义。所以，这里的做法，用到了shared_ptr的使用场景之一，就是当我们进行数据共享时，可以在dynamic memeory进行资源开辟，交给shared_ptr管理
3. 对于2中的做法，按照前面提到的内容，我认为是合理的。

下面是一些反思：
1. 不管是我的做法，还是课本的做法，对于文件资源的管理都忽视了，如果文件不能解释关闭，也会损失资源。
